# Docusphere - Plateforme de Gestion Documentaire et Immobili√®re

Docusphere est une application collaborative avanc√©e de gestion documentaire d√©velopp√©e avec Ruby on Rails, int√©grant un module m√©tier sp√©cialis√© pour l'immobilier. La plateforme combine une GED (Gestion √âlectronique de Documents) performante avec des outils m√©tier sp√©cialis√©s.

## üéØ Vision Produit

Docusphere transforme la gestion documentaire traditionnelle en plateforme m√©tier intelligente, avec un focus initial sur l'immobilier via le module **ImmoPromo**. L'objectif est de fournir une solution compl√®te pour les professionnels n√©cessitant √† la fois une GED robuste et des workflows m√©tier sp√©cialis√©s.

## ‚ú® Fonctionnalit√©s Principales

### üìÑ Gestion Documentaire Avanc√©e
- **Formats support√©s** : PDF, PDF/A, Word, Excel, PowerPoint, images, audio, vid√©o, email, ZIP
- **Upload intelligent** : Glisser-d√©poser, import en lot, d√©tection automatique de format
- **Traitement automatique** : OCR int√©gr√© (Tesseract), extraction de m√©tadonn√©es, classification IA
- **Manipulation PDF** : Fusion, d√©coupage, annotation, signature √©lectronique
- **Versioning** : Gestion compl√®te des versions avec historique et comparaison
- **S√©curit√©** : Chiffrement, filigrane, verrouillage, contr√¥le d'acc√®s granulaire

### ü§ù Collaboration Moderne
- **Partage intelligent** : Liens s√©curis√©s, permissions temporaires, tra√ßabilit√© compl√®te
- **Workflows** : Validation multi-niveaux, circuits d'approbation personnalisables
- **Notifications** : Syst√®me complet temps r√©el avec pr√©f√©rences utilisateur granulaires
- **Co-√©dition** : √âdition collaborative type Office 365 avec synchronisation
- **Commentaires** : Annotations contextuelles, discussions par document

### üóÇÔ∏è Organisation Intelligente
- **Espaces th√©matiques** : Organisation par projet, d√©partement, ou domaine m√©tier
- **Classification automatique** : IA pour cat√©gorisation et m√©tadonn√©es
- **Taxonomie flexible** : Plan de classement adaptatif, √©tiquettes intelligentes
- **M√©tadonn√©es** : Champs personnalisables avec h√©ritage et templates
- **Relations** : Liens entre documents, projets et entit√©s m√©tier

### üîç Recherche & D√©couverte
- **Recherche intelligente** : Plein texte, m√©tadonn√©es, contenu IA-index√©
- **Filtres dynamiques** : Interface intuitive avec suggestions automatiques
- **Recherches sauvegard√©es** : Alertes automatiques, rapports programm√©s
- **D√©couverte** : Recommandations bas√©es sur l'usage et le contexte
- **Cross-r√©f√©rencement** : Liens automatiques entre documents similaires

### üë• Administration Compl√®te
- **Gestion utilisateurs** : SSO, LDAP, groupes dynamiques, d√©provisioning automatique
- **Permissions granulaires** : Contr√¥le au niveau document, dossier, et fonctionnalit√©
- **Audit & conformit√©** : Logs d√©taill√©s, conformit√© RGPD, archivage l√©gal
- **Analytiques** : Tableaux de bord usage, performance, ROI
- **Maintenance** : Monitoring proactif, optimisation automatique

## üèóÔ∏è Module ImmoPromo - Gestion Immobili√®re Int√©gr√©e

Docusphere int√®gre **ImmoPromo**, un module m√©tier complet pour les professionnels de l'immobilier d√©velopp√© comme Rails Engine. Cette int√©gration transforme Docusphere en plateforme immobili√®re compl√®te avec gestion documentaire centralis√©e.

### üéØ Vue d'Ensemble ImmoPromo

**ImmoPromo** est con√ßu pour les promoteurs, ma√Ætres d'ouvrage, architectes, et tous les acteurs de la cha√Æne immobili√®re n√©cessitant une coordination efficace et une tra√ßabilit√© documentaire compl√®te.

### üìã Fonctionnalit√©s M√©tier

#### üè¢ Gestion de Projets Immobiliers
- **Planification multi-phases** : De l'√©tude de faisabilit√© √† la livraison
- **Timeline interactive** : Suivi visuel avec jalons et d√©pendances
- **Tableaux de bord** : KPIs temps r√©el, alertes proactives
- **Gestion des lots** : D√©finition, r√©servations, suivi commercial

#### üë• Coordination des Intervenants  
- **Parties prenantes** : Architectes, bureaux d'√©tudes, entreprises, organismes
- **Gestion des contrats** : Centralisation, suivi √©ch√©ances, p√©nalit√©s
- **Certifications** : Suivi validit√©, alertes renouvellement
- **Planning partag√©** : Coordination interventions, d√©tection conflits

#### üìã Workflow Permis & Autorisations
- **Permis de construire** : Guide √©tapes, checklist conformit√©
- **Autorisations** : Suivi conditions, dates limites, recours
- **Documents r√©glementaires** : Centralisation, versions, validations
- **Notifications** : Alertes √©ch√©ances, rappels obligatoires

#### üí∞ Suivi Financier Avanc√©
- **Budgets d√©taill√©s** : Postes, sous-postes, analyses d'√©carts
- **Sc√©narios** : Optimiste/pessimiste, simulation impacts
- **Tr√©sorerie** : Pr√©visionnels, besoins financement
- **Rentabilit√©** : ROI, TRI, seuils de rentabilit√©

#### ‚ö†Ô∏è Gestion des Risques
- **Identification** : Matrice risques/impacts/probabilit√©s
- **Plans d'att√©nuation** : Actions pr√©ventives et correctives
- **Monitoring** : Suivi indicateurs, alertes pr√©coces
- **Reporting** : Synth√®ses risques, recommandations

### üìÑ Int√©gration Documentaire

#### üîó Documents Centralis√©s par Entit√©
- **Projets** : Cahiers des charges, √©tudes de faisabilit√©, bilans
- **Phases** : Rapports d'avancement, PV de r√©unions, validations
- **T√¢ches** : Devis, factures, comptes-rendus, livrables
- **Permis** : Dossiers complets, correspondances, modificatifs
- **Intervenants** : Contrats, assurances, certifications, CV

#### üìä Workflows Documentaires M√©tier
- **Validation** : Circuits d'approbation sp√©cialis√©s (technique, financier, juridique)
- **Versioning** : Gestion versions plans, cahiers des charges, contrats
- **Partage s√©lectif** : Documents par r√¥le et phase de projet
- **Archivage automatique** : Fin de phase, fin de projet, obligations l√©gales

#### ü§ñ Intelligence Documentaire
- **Classification automatique** : Reconnaissance type document (devis, facture, plan, etc.)
- **Extraction m√©tadonn√©es** : Montants, dates, r√©f√©rences, parties prenantes
- **Conformit√©** : V√©rification pr√©sence documents obligatoires par phase
- **Alertes** : Documents manquants, √©ch√©ances, validations en attente

### üé® Interfaces Sp√©cialis√©es

#### üìä Dashboard Coordination
- Vue d'ensemble interventions en cours
- D√©tection conflits planning et ressources  
- Suivi KPIs performance par intervenant
- Alertes retards et non-conformit√©s

#### üíº Dashboard Commercial
- Pipeline prospects et r√©servations
- Suivi disponibilit√©s et tarification
- Statistiques ventes et rentabilit√©
- Gestion relation client int√©gr√©e

#### üìà Dashboard Financier
- Analyse variance budget/r√©alis√© en temps r√©el
- Pr√©visions tr√©sorerie et besoins financement
- Sc√©narios et simulations √©conomiques
- Reporting financier automatis√©

#### ‚ö° Dashboard Risques
- Matrice risques interactive avec drill-down
- Syst√®me d'alerte pr√©coce configurable
- Suivi plans d'actions et efficacit√©
- Reporting conformit√© et audit

### üõ†Ô∏è Architecture Technique

#### üß© Rails Engine Modulaire
- **Isolation compl√®te** : Mod√®les, contr√¥leurs, vues d√©di√©s
- **API REST** : Endpoints sp√©cialis√©s pour int√©grations tierces
- **√âv√©nements** : Hooks pour synchronisation avec GED principale
- **Permissions** : Syst√®me d'autorisation unifi√© avec Docusphere

#### üé® Composants ViewComponent
- **R√©utilisabilit√©** : Composants UI sp√©cialis√©s m√©tier immobilier
- **Coh√©rence** : Design system coh√©rent avec GED principale  
- **Performance** : Rendu optimis√© et cache intelligent
- **Maintenance** : S√©paration claire logique/pr√©sentation

#### üîí S√©curit√© & Conformit√©
- **Isolation donn√©es** : Cloisonnement par organisation/projet
- **Audit trail** : Tra√ßabilit√© compl√®te actions et acc√®s
- **RGPD ready** : Gestion consentements et droit √† l'oubli
- **Archivage l√©gal** : R√©tention documentaire selon obligations

### üöÄ Acc√®s et Navigation

**URL d'acc√®s** : `/immo/promo/`  
**Pr√©requis** : Authentification + permission `immo_promo:access`  
**Navigation** : Menu d√©di√© dans barre principale Docusphere  
**Contexte** : Basculement fluide entre GED g√©n√©rale et module m√©tier

## Pr√©requis

- Docker et Docker Compose
- 4GB de RAM minimum
- 10GB d'espace disque

## Installation

1. Cloner le repository
```bash
git clone [URL_DU_REPO]
cd docusphere
```

2. Lancer le script de configuration initiale
```bash
./setup.sh
```

3. Une fois la construction Docker termin√©e, finaliser l'installation
```bash
./finalize_setup.sh
```

4. D√©marrer l'application
```bash
docker-compose up
```

L'application sera accessible sur http://localhost:3000

**Compte administrateur par d√©faut :**
- Email : admin@docusphere.fr
- Mot de passe : password123

## üèóÔ∏è Architecture Technique

### üíª Stack Technologique
- **Backend** : Ruby on Rails 7.1+ avec architecture modulaire
- **Frontend** : ViewComponent + Turbo + Stimulus + Tailwind CSS
- **Base de donn√©es** : PostgreSQL 15 avec extensions (pgcrypto, uuid, full-text search)
- **Cache & Queues** : Redis pour sessions, cache, et Sidekiq
- **Recherche** : Elasticsearch 8.x avec indexation automatique
- **Stockage** : Active Storage + traitement d'images/documents
- **Monitoring** : Logs structur√©s, m√©triques application

### üß© Architecture Modulaire
- **Core GED** : Fonctionnalit√©s documentaires de base
- **Rails Engines** : Modules m√©tier isol√©s (ImmoPromo, futurs modules)
- **ViewComponents** : Composants UI r√©utilisables et testables
- **Service Objects** : Logique m√©tier centralis√©e et testable
- **API REST** : Endpoints versionn√©s pour int√©grations tierces

### üîÑ Patterns & Conventions
- **SOLID principles** : Code maintenable et extensible
- **Convention over configuration** : R√©duction complexit√© d√©veloppement
- **Domain-Driven Design** : Mod√©lisation m√©tier claire
- **Event-driven architecture** : Communication inter-modules via √©v√©nements
- **Test-driven development** : Couverture tests compl√®te (>90%)

## Services Docker

- `web` : Application Rails (port 3000)
- `db` : PostgreSQL (port 5432)
- `redis` : Redis (port 6379)
- `sidekiq` : Worker Sidekiq
- `elasticsearch` : Moteur de recherche (port 9200)

## D√©veloppement

### üõ†Ô∏è Commandes de D√©veloppement

#### Tests & Qualit√©
```bash
# Tests parall√®les (recommand√©)
docker-compose run --rm -e PARALLEL_TEST_PROCESSORS=4 web bundle exec parallel_rspec

# Tests s√©quentiels avec fail-fast
docker-compose run --rm web bundle exec rspec --fail-fast

# Tests sp√©cifiques
docker-compose run --rm web bundle exec rspec spec/models/
docker-compose run --rm web bundle exec rspec engines/immo_promo/spec/

# Qualit√© code
docker-compose run --rm web bundle exec rubocop
docker-compose run --rm web bundle exec brakeman
```

#### Administration
```bash
# Console Rails
docker-compose run --rm web rails console

# Migrations
docker-compose run --rm web rails db:migrate
docker-compose run --rm web rails immo_promo:install:migrations

# Seed data
docker-compose run --rm web rails db:seed

# Monitoring
docker-compose logs -f web
docker-compose logs -f sidekiq
```

#### D√©veloppement
```bash
# Reconstruire images
docker-compose build

# Reset complet environnement
docker-compose down -v
docker-compose build --no-cache
docker-compose up
```

### üìÅ Structure du Projet

```
docusphere/                         # üè† Racine application
‚îú‚îÄ‚îÄ üì± app/                         # Application principale
‚îÇ   ‚îú‚îÄ‚îÄ üóÉÔ∏è  models/                # Mod√®les m√©tier (Document, User, etc.)
‚îÇ   ‚îú‚îÄ‚îÄ üéÆ controllers/            # Contr√¥leurs REST & API
‚îÇ   ‚îú‚îÄ‚îÄ üé® views/                  # Templates ERB
‚îÇ   ‚îú‚îÄ‚îÄ üß© components/             # ViewComponents r√©utilisables
‚îÇ   ‚îú‚îÄ‚îÄ üîß services/               # Logique m√©tier (NotificationService, etc.)
‚îÇ   ‚îú‚îÄ‚îÄ üõ°Ô∏è  policies/              # Autorisations Pundit
‚îÇ   ‚îú‚îÄ‚îÄ ‚ö° javascript/             # Stimulus controllers
‚îÇ   ‚îî‚îÄ‚îÄ üíº jobs/                   # Jobs asynchrones Sidekiq
‚îú‚îÄ‚îÄ ‚öôÔ∏è  config/                     # Configuration Rails
‚îÇ   ‚îú‚îÄ‚îÄ üåê locales/                # Internationalisation (FR/EN)
‚îÇ   ‚îú‚îÄ‚îÄ üóÉÔ∏è  database.yml           # Configuration PostgreSQL
‚îÇ   ‚îî‚îÄ‚îÄ üöÄ initializers/          # Configuration gems & services
‚îú‚îÄ‚îÄ üóÉÔ∏è  db/                        # Base de donn√©es
‚îÇ   ‚îú‚îÄ‚îÄ üìã migrate/                # Migrations consolid√©es (8 fichiers)
‚îÇ   ‚îî‚îÄ‚îÄ üå± seeds.rb                # Donn√©es d'exemple
‚îú‚îÄ‚îÄ üèóÔ∏è  engines/                   # Modules m√©tier Rails Engine
‚îÇ   ‚îî‚îÄ‚îÄ üè† immo_promo/             # Module immobilier
‚îÇ       ‚îú‚îÄ‚îÄ üì± app/                # MVC sp√©cialis√© immobilier
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ üóÉÔ∏è  models/        # Projets, Phases, T√¢ches, etc.
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ üéÆ controllers/    # API & interfaces m√©tier
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ üß© components/     # UI sp√©cialis√©e immobilier
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ üõ°Ô∏è  policies/      # Permissions m√©tier
‚îÇ       ‚îú‚îÄ‚îÄ ‚öôÔ∏è  config/            # Routes & configuration engine
‚îÇ       ‚îú‚îÄ‚îÄ üóÉÔ∏è  db/                # Migrations engine
‚îÇ       ‚îî‚îÄ‚îÄ üß™ spec/               # Tests engine (>95% couverture)
‚îú‚îÄ‚îÄ üß™ spec/                       # Tests application principale
‚îÇ   ‚îú‚îÄ‚îÄ üìã models/                # Tests mod√®les
‚îÇ   ‚îú‚îÄ‚îÄ üéÆ controllers/           # Tests contr√¥leurs
‚îÇ   ‚îú‚îÄ‚îÄ üß© components/            # Tests ViewComponents
‚îÇ   ‚îú‚îÄ‚îÄ üåê system/                # Tests end-to-end
‚îÇ   ‚îî‚îÄ‚îÄ üè≠ factories/             # Donn√©es de test FactoryBot
‚îú‚îÄ‚îÄ üìÑ storage/                    # Documents & fichiers
‚îÇ   ‚îî‚îÄ‚îÄ üìÇ sample_documents/      # Documents d'exemple immobilier
‚îú‚îÄ‚îÄ üê≥ docker-compose.yml         # Orchestration services Docker
‚îî‚îÄ‚îÄ üìö README.md                  # Documentation projet
```

### üß™ Couverture Tests

- **Application principale** : >90% couverture
- **Engine ImmoPromo** : >95% couverture  
- **Types de tests** : Unit, Integration, System, Component
- **Tools** : RSpec, FactoryBot, Capybara, Selenium

### üìä M√©triques Qualit√©

- **Complexit√© cyclomatique** : < 15 par m√©thode
- **Duplication** : < 5% code dupliqu√©
- **S√©curit√©** : Scan Brakeman sans vuln√©rabilit√©s critiques
- **Performance** : Temps r√©ponse < 200ms P95

## üìÑ Licence

**Propri√©taire** - Tous droits r√©serv√©s  
¬© 2025 DocuSphere - Plateforme de Gestion Documentaire M√©tier