# Docusphere - Plateforme de Gestion Documentaire et ImmobiliÃ¨re

Docusphere est une application collaborative avancÃ©e de gestion documentaire dÃ©veloppÃ©e avec Ruby on Rails, intÃ©grant un module mÃ©tier spÃ©cialisÃ© pour l'immobilier. La plateforme combine une GED (Gestion Ã‰lectronique de Documents) performante avec des outils mÃ©tier spÃ©cialisÃ©s.

## ğŸ¯ Vision Produit

Docusphere transforme la gestion documentaire traditionnelle en plateforme mÃ©tier intelligente, avec un focus initial sur l'immobilier via le module **ImmoPromo**. L'objectif est de fournir une solution complÃ¨te pour les professionnels nÃ©cessitant Ã  la fois une GED robuste et des workflows mÃ©tier spÃ©cialisÃ©s.

## âœ¨ FonctionnalitÃ©s Principales

### ğŸ“„ Gestion Documentaire AvancÃ©e
- **Formats supportÃ©s** : PDF, PDF/A, Word, Excel, PowerPoint, images, audio, vidÃ©o, email, ZIP
- **Upload intelligent** : Glisser-dÃ©poser, import en lot, dÃ©tection automatique de format
- **Traitement automatique** : OCR intÃ©grÃ© (Tesseract), extraction de mÃ©tadonnÃ©es, classification IA
- **Manipulation PDF** : Fusion, dÃ©coupage, annotation, signature Ã©lectronique
- **Versioning** : Gestion complÃ¨te des versions avec historique et comparaison
- **SÃ©curitÃ©** : Chiffrement, filigrane, verrouillage, contrÃ´le d'accÃ¨s granulaire

### ğŸ¤ Collaboration Moderne
- **Partage intelligent** : Liens sÃ©curisÃ©s, permissions temporaires, traÃ§abilitÃ© complÃ¨te
- **Workflows** : Validation multi-niveaux, circuits d'approbation personnalisables
- **Notifications** : SystÃ¨me complet temps rÃ©el avec prÃ©fÃ©rences utilisateur granulaires
- **Co-Ã©dition** : Ã‰dition collaborative type Office 365 avec synchronisation
- **Commentaires** : Annotations contextuelles, discussions par document

### ğŸ—‚ï¸ Organisation Intelligente
- **Espaces thÃ©matiques** : Organisation par projet, dÃ©partement, ou domaine mÃ©tier
- **Classification automatique** : IA pour catÃ©gorisation et mÃ©tadonnÃ©es
- **Taxonomie flexible** : Plan de classement adaptatif, Ã©tiquettes intelligentes
- **MÃ©tadonnÃ©es** : Champs personnalisables avec hÃ©ritage et templates
- **Relations** : Liens entre documents, projets et entitÃ©s mÃ©tier

### ğŸ” Recherche & DÃ©couverte
- **Recherche intelligente** : Plein texte, mÃ©tadonnÃ©es, contenu IA-indexÃ©
- **Filtres dynamiques** : Interface intuitive avec suggestions automatiques
- **Recherches sauvegardÃ©es** : Alertes automatiques, rapports programmÃ©s
- **DÃ©couverte** : Recommandations basÃ©es sur l'usage et le contexte
- **Cross-rÃ©fÃ©rencement** : Liens automatiques entre documents similaires

### ğŸ‘¥ Administration ComplÃ¨te
- **Gestion utilisateurs** : SSO, LDAP, groupes dynamiques, dÃ©provisioning automatique
- **Permissions granulaires** : ContrÃ´le au niveau document, dossier, et fonctionnalitÃ©
- **Audit & conformitÃ©** : Logs dÃ©taillÃ©s, conformitÃ© RGPD, archivage lÃ©gal
- **Analytiques** : Tableaux de bord usage, performance, ROI
- **Maintenance** : Monitoring proactif, optimisation automatique

## ğŸ—ï¸ Module ImmoPromo - Gestion ImmobiliÃ¨re IntÃ©grÃ©e

Docusphere intÃ¨gre **ImmoPromo**, un module mÃ©tier complet pour les professionnels de l'immobilier dÃ©veloppÃ© comme Rails Engine. Cette intÃ©gration transforme Docusphere en plateforme immobiliÃ¨re complÃ¨te avec gestion documentaire centralisÃ©e.

### ğŸ¯ Vue d'Ensemble ImmoPromo

**ImmoPromo** est conÃ§u pour les promoteurs, maÃ®tres d'ouvrage, architectes, et tous les acteurs de la chaÃ®ne immobiliÃ¨re nÃ©cessitant une coordination efficace et une traÃ§abilitÃ© documentaire complÃ¨te.

### ğŸ“‹ FonctionnalitÃ©s MÃ©tier

#### ğŸ¢ Gestion de Projets Immobiliers
- **Planification multi-phases** : De l'Ã©tude de faisabilitÃ© Ã  la livraison
- **Timeline interactive** : Suivi visuel avec jalons et dÃ©pendances
- **Tableaux de bord** : KPIs temps rÃ©el, alertes proactives
- **Gestion des lots** : DÃ©finition, rÃ©servations, suivi commercial

#### ğŸ‘¥ Coordination des Intervenants  
- **Parties prenantes** : Architectes, bureaux d'Ã©tudes, entreprises, organismes
- **Gestion des contrats** : Centralisation, suivi Ã©chÃ©ances, pÃ©nalitÃ©s
- **Certifications** : Suivi validitÃ©, alertes renouvellement
- **Planning partagÃ©** : Coordination interventions, dÃ©tection conflits

#### ğŸ“‹ Workflow Permis & Autorisations
- **Permis de construire** : Guide Ã©tapes, checklist conformitÃ©
- **Autorisations** : Suivi conditions, dates limites, recours
- **Documents rÃ©glementaires** : Centralisation, versions, validations
- **Notifications** : Alertes Ã©chÃ©ances, rappels obligatoires

#### ğŸ’° Suivi Financier AvancÃ©
- **Budgets dÃ©taillÃ©s** : Postes, sous-postes, analyses d'Ã©carts
- **ScÃ©narios** : Optimiste/pessimiste, simulation impacts
- **TrÃ©sorerie** : PrÃ©visionnels, besoins financement
- **RentabilitÃ©** : ROI, TRI, seuils de rentabilitÃ©

#### âš ï¸ Gestion des Risques
- **Identification** : Matrice risques/impacts/probabilitÃ©s
- **Plans d'attÃ©nuation** : Actions prÃ©ventives et correctives
- **Monitoring** : Suivi indicateurs, alertes prÃ©coces
- **Reporting** : SynthÃ¨ses risques, recommandations

### ğŸ“„ IntÃ©gration Documentaire

#### ğŸ”— Documents CentralisÃ©s par EntitÃ©
- **Projets** : Cahiers des charges, Ã©tudes de faisabilitÃ©, bilans
- **Phases** : Rapports d'avancement, PV de rÃ©unions, validations
- **TÃ¢ches** : Devis, factures, comptes-rendus, livrables
- **Permis** : Dossiers complets, correspondances, modificatifs
- **Intervenants** : Contrats, assurances, certifications, CV

#### ğŸ“Š Workflows Documentaires MÃ©tier
- **Validation** : Circuits d'approbation spÃ©cialisÃ©s (technique, financier, juridique)
- **Versioning** : Gestion versions plans, cahiers des charges, contrats
- **Partage sÃ©lectif** : Documents par rÃ´le et phase de projet
- **Archivage automatique** : Fin de phase, fin de projet, obligations lÃ©gales

#### ğŸ¤– Intelligence Documentaire
- **Classification automatique** : Reconnaissance type document (devis, facture, plan, etc.)
- **Extraction mÃ©tadonnÃ©es** : Montants, dates, rÃ©fÃ©rences, parties prenantes
- **ConformitÃ©** : VÃ©rification prÃ©sence documents obligatoires par phase
- **Alertes** : Documents manquants, Ã©chÃ©ances, validations en attente

### ğŸ¨ Interfaces SpÃ©cialisÃ©es

#### ğŸ“Š Dashboard Coordination
- Vue d'ensemble interventions en cours
- DÃ©tection conflits planning et ressources  
- Suivi KPIs performance par intervenant
- Alertes retards et non-conformitÃ©s

#### ğŸ’¼ Dashboard Commercial
- Pipeline prospects et rÃ©servations
- Suivi disponibilitÃ©s et tarification
- Statistiques ventes et rentabilitÃ©
- Gestion relation client intÃ©grÃ©e

#### ğŸ“ˆ Dashboard Financier
- Analyse variance budget/rÃ©alisÃ© en temps rÃ©el
- PrÃ©visions trÃ©sorerie et besoins financement
- ScÃ©narios et simulations Ã©conomiques
- Reporting financier automatisÃ©

#### âš¡ Dashboard Risques
- Matrice risques interactive avec drill-down
- SystÃ¨me d'alerte prÃ©coce configurable
- Suivi plans d'actions et efficacitÃ©
- Reporting conformitÃ© et audit

### ğŸ› ï¸ Architecture Technique

#### ğŸ§© Rails Engine Modulaire
- **Isolation complÃ¨te** : ModÃ¨les, contrÃ´leurs, vues dÃ©diÃ©s
- **API REST** : Endpoints spÃ©cialisÃ©s pour intÃ©grations tierces
- **Ã‰vÃ©nements** : Hooks pour synchronisation avec GED principale
- **Permissions** : SystÃ¨me d'autorisation unifiÃ© avec Docusphere

#### ğŸ¨ Composants ViewComponent
- **RÃ©utilisabilitÃ©** : Composants UI spÃ©cialisÃ©s mÃ©tier immobilier
- **CohÃ©rence** : Design system cohÃ©rent avec GED principale  
- **Performance** : Rendu optimisÃ© et cache intelligent
- **Maintenance** : SÃ©paration claire logique/prÃ©sentation

#### ğŸ”’ SÃ©curitÃ© & ConformitÃ©
- **Isolation donnÃ©es** : Cloisonnement par organisation/projet
- **Audit trail** : TraÃ§abilitÃ© complÃ¨te actions et accÃ¨s
- **RGPD ready** : Gestion consentements et droit Ã  l'oubli
- **Archivage lÃ©gal** : RÃ©tention documentaire selon obligations

### ğŸš€ AccÃ¨s et Navigation

**URL d'accÃ¨s** : `/immo/promo/`  
**PrÃ©requis** : Authentification + permission `immo_promo:access`  
**Navigation** : Menu dÃ©diÃ© dans barre principale Docusphere  
**Contexte** : Basculement fluide entre GED gÃ©nÃ©rale et module mÃ©tier

## PrÃ©requis

- Docker et Docker Compose
- 4GB de RAM minimum
- 10GB d'espace disque

## Installation

1. Cloner le repository
```bash
git clone [URL_DU_REPO]
cd docusphere
```

2. Lancer le script de configuration initiale
```bash
./setup.sh
```

3. Une fois la construction Docker terminÃ©e, finaliser l'installation
```bash
./finalize_setup.sh
```

4. DÃ©marrer l'application
```bash
docker-compose up
```

L'application sera accessible sur http://localhost:3000

**Compte administrateur par dÃ©faut :**
- Email : admin@docusphere.fr
- Mot de passe : password123

## ğŸ—ï¸ Architecture Technique

### ğŸ’» Stack Technologique
- **Backend** : Ruby on Rails 7.1+ avec architecture modulaire
- **Frontend** : ViewComponent + Turbo + Stimulus + Tailwind CSS
- **Base de donnÃ©es** : PostgreSQL 15 avec extensions (pgcrypto, uuid, full-text search)
- **Cache & Queues** : Redis pour sessions, cache, et Sidekiq
- **Recherche** : Elasticsearch 8.x avec indexation automatique
- **Stockage** : Active Storage + traitement d'images/documents
- **Monitoring** : Logs structurÃ©s, mÃ©triques application

### ğŸ§© Architecture Modulaire
- **Core GED** : FonctionnalitÃ©s documentaires de base
- **Rails Engines** : Modules mÃ©tier isolÃ©s (ImmoPromo, futurs modules)
- **ViewComponents** : Composants UI rÃ©utilisables et testables
- **Service Objects** : Logique mÃ©tier centralisÃ©e et testable
- **API REST** : Endpoints versionnÃ©s pour intÃ©grations tierces

### ğŸ”„ Patterns & Conventions
- **SOLID principles** : Code maintenable et extensible
- **Convention over configuration** : RÃ©duction complexitÃ© dÃ©veloppement
- **Domain-Driven Design** : ModÃ©lisation mÃ©tier claire
- **Event-driven architecture** : Communication inter-modules via Ã©vÃ©nements
- **Test-driven development** : Couverture tests complÃ¨te (>90%)

## Services Docker

- `web` : Application Rails (port 3000)
- `db` : PostgreSQL (port 5432)
- `redis` : Redis (port 6379)
- `sidekiq` : Worker Sidekiq
- `elasticsearch` : Moteur de recherche (port 9200)

## DÃ©veloppement

### ğŸ› ï¸ Commandes de DÃ©veloppement

#### Tests & QualitÃ©
```bash
# Tests parallÃ¨les (recommandÃ©)
docker-compose run --rm -e PARALLEL_TEST_PROCESSORS=4 web bundle exec parallel_rspec

# Tests sÃ©quentiels avec fail-fast
docker-compose run --rm web bundle exec rspec --fail-fast

# Tests spÃ©cifiques
docker-compose run --rm web bundle exec rspec spec/models/
docker-compose run --rm web bundle exec rspec engines/immo_promo/spec/

# QualitÃ© code
docker-compose run --rm web bundle exec rubocop
docker-compose run --rm web bundle exec brakeman
```

#### Administration
```bash
# Console Rails
docker-compose run --rm web rails console

# Migrations
docker-compose run --rm web rails db:migrate
docker-compose run --rm web rails immo_promo:install:migrations

# Seed data
docker-compose run --rm web rails db:seed

# Monitoring
docker-compose logs -f web
docker-compose logs -f sidekiq
```

#### DÃ©veloppement
```bash
# Reconstruire images
docker-compose build

# Reset complet environnement
docker-compose down -v
docker-compose build --no-cache
docker-compose up
```

### ğŸ“ Structure du Projet

```
docusphere/                         # ğŸ  Racine application
â”œâ”€â”€ ğŸ“± app/                         # Application principale
â”‚   â”œâ”€â”€ ğŸ—ƒï¸  models/                # ModÃ¨les mÃ©tier (Document, User, etc.)
â”‚   â”œâ”€â”€ ğŸ® controllers/            # ContrÃ´leurs REST & API
â”‚   â”œâ”€â”€ ğŸ¨ views/                  # Templates ERB
â”‚   â”œâ”€â”€ ğŸ§© components/             # ViewComponents rÃ©utilisables
â”‚   â”œâ”€â”€ ğŸ”§ services/               # Logique mÃ©tier (NotificationService, etc.)
â”‚   â”œâ”€â”€ ğŸ›¡ï¸  policies/              # Autorisations Pundit
â”‚   â”œâ”€â”€ âš¡ javascript/             # Stimulus controllers
â”‚   â””â”€â”€ ğŸ’¼ jobs/                   # Jobs asynchrones Sidekiq
â”œâ”€â”€ âš™ï¸  config/                     # Configuration Rails
â”‚   â”œâ”€â”€ ğŸŒ locales/                # Internationalisation (FR/EN)
â”‚   â”œâ”€â”€ ğŸ—ƒï¸  database.yml           # Configuration PostgreSQL
â”‚   â””â”€â”€ ğŸš€ initializers/          # Configuration gems & services
â”œâ”€â”€ ğŸ—ƒï¸  db/                        # Base de donnÃ©es
â”‚   â”œâ”€â”€ ğŸ“‹ migrate/                # Migrations consolidÃ©es (8 fichiers)
â”‚   â””â”€â”€ ğŸŒ± seeds.rb                # DonnÃ©es d'exemple
â”œâ”€â”€ ğŸ—ï¸  engines/                   # Modules mÃ©tier Rails Engine
â”‚   â””â”€â”€ ğŸ  immo_promo/             # Module immobilier
â”‚       â”œâ”€â”€ ğŸ“± app/                # MVC spÃ©cialisÃ© immobilier
â”‚       â”‚   â”œâ”€â”€ ğŸ—ƒï¸  models/        # Projets, Phases, TÃ¢ches, etc.
â”‚       â”‚   â”œâ”€â”€ ğŸ® controllers/    # API & interfaces mÃ©tier
â”‚       â”‚   â”œâ”€â”€ ğŸ§© components/     # UI spÃ©cialisÃ©e immobilier
â”‚       â”‚   â””â”€â”€ ğŸ›¡ï¸  policies/      # Permissions mÃ©tier
â”‚       â”œâ”€â”€ âš™ï¸  config/            # Routes & configuration engine
â”‚       â”œâ”€â”€ ğŸ—ƒï¸  db/                # Migrations engine
â”‚       â””â”€â”€ ğŸ§ª spec/               # Tests engine (>95% couverture)
â”œâ”€â”€ ğŸ§ª spec/                       # Tests application principale
â”‚   â”œâ”€â”€ ğŸ“‹ models/                # Tests modÃ¨les
â”‚   â”œâ”€â”€ ğŸ® controllers/           # Tests contrÃ´leurs
â”‚   â”œâ”€â”€ ğŸ§© components/            # Tests ViewComponents
â”‚   â”œâ”€â”€ ğŸŒ system/                # Tests end-to-end
â”‚   â””â”€â”€ ğŸ­ factories/             # DonnÃ©es de test FactoryBot
â”œâ”€â”€ ğŸ“„ storage/                    # Documents & fichiers
â”‚   â””â”€â”€ ğŸ“‚ sample_documents/      # Documents d'exemple immobilier
â”œâ”€â”€ ğŸ³ docker-compose.yml         # Orchestration services Docker
â””â”€â”€ ğŸ“š README.md                  # Documentation projet
```

### ğŸ§ª Couverture Tests

- **Application principale** : >90% couverture
- **Engine ImmoPromo** : >95% couverture  
- **Types de tests** : Unit, Integration, System, Component
- **Tools** : RSpec, FactoryBot, Capybara, Selenium

### ğŸ“Š MÃ©triques QualitÃ©

- **ComplexitÃ© cyclomatique** : < 15 par mÃ©thode
- **Duplication** : < 5% code dupliquÃ©
- **SÃ©curitÃ©** : Scan Brakeman sans vulnÃ©rabilitÃ©s critiques
- **Performance** : Temps rÃ©ponse < 200ms P95

## ğŸ“„ Licence

**PropriÃ©taire** - Tous droits rÃ©servÃ©s  
Â© 2025 DocuSphere - Plateforme de Gestion Documentaire MÃ©tier