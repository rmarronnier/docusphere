<% if responsive %>
  <div class="overflow-x-auto">
<% end %>

<% if items.any? %>
  <table class="<%= table_classes %>">
    <thead class="bg-gray-50">
      <tr>
        <% columns.each do |column| %>
          <th scope="col" class="<%= column[:header_class] || 'px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider' %>">
            <%= column[:label] %>
          </th>
        <% end %>
        <% if actions.present? %>
          <th scope="col" class="relative px-6 py-3">
            <span class="sr-only">Actions</span>
          </th>
        <% end %>
      </tr>
    </thead>
    <tbody class="bg-white divide-y divide-gray-200">
      <% items.each_with_index do |item, index| %>
        <tr class="<%= 'bg-gray-50' if striped && index.odd? %> <%= 'hover:bg-gray-100' if hoverable %>">
          <% columns.each do |column| %>
            <td class="<%= column[:cell_class] || 'px-6 py-4 whitespace-nowrap text-sm text-gray-900' %>">
              <%= render_cell(item, column) %>
            </td>
          <% end %>
          <% if actions.present? %>
            <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
              <div class="flex items-center justify-end space-x-2">
                <% actions.call(item).each do |action| %>
                  <% if action[:type] == 'button' %>
                    <%= render Ui::ButtonComponent.new(
                      text: action[:text],
                      path: action[:path],
                      icon: action[:icon],
                      variant: action[:variant] || 'secondary',
                      size: 'small',
                      method: action[:method] || :get,
                      confirm: action[:confirm]
                    ) %>
                  <% elsif action[:type] == 'link' %>
                    <%= link_to action[:text], 
                        action[:path],
                        class: action[:class] || 'text-blue-600 hover:text-blue-900',
                        method: action[:method] || :get,
                        data: action[:data] || {} %>
                  <% elsif action[:type] == 'dropdown' %>
                    <%= render Ui::ButtonComponent.new(
                      text: action[:text] || 'Actions',
                      icon: 'chevron-down',
                      variant: 'secondary',
                      size: 'small',
                      dropdown: true,
                      dropdown_items: action[:items]
                    ) %>
                  <% end %>
                <% end %>
              </div>
            </td>
          <% end %>
        </tr>
      <% end %>
    </tbody>
  </table>
<% else %>
  <div class="text-center py-12">
    <%= render Ui::IconComponent.new(name: 'inbox', classes: 'h-12 w-12 text-gray-400 mx-auto mb-4') %>
    <h3 class="text-lg font-medium text-gray-900 mb-2"><%= empty_message %></h3>
  </div>
<% end %>

<% if responsive %>
  </div>
<% end %>